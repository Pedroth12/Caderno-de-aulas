{
  "hash": "7c577a1190ab7847ad04922bef807ccc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Aula 2 - Importação e Manipulação de Dados\"\nauthor: \"Pedro Thiagos Santos Nogueira\"\ndate: \"2025-03-26\"\nformat: html\neditor: visual\n---\n\n\n\n\n## Aula 2 – 26/03/2025\n\n### Disciplina: FIP606 – Análise e Visualização de Dados em Fitopatologia\n\n**Professor:** Emerson Del Ponte\n\n#### ✦ Objetivos da aula:\n\n-   Importar dados de diferentes formatos (Excel, CSV e Google Sheets)\n-   Manipular tabelas com `dplyr`, `janitor` e `tidyverse`\n-   Aplicar funções como `mutate()`, `filter()`, `group_by()`, `select()` e `tabyl()`\n-   Criar visualizações básicas com `ggplot2`\n-   Exportar gráficos com `ggsave()`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Carregamento dos pacotes\n\nlibrary(tidyverse)  # Conjunto de pacotes para análise e visualização de dados\nlibrary(readxl)     # Para leitura de arquivos Excel\nlibrary(dplyr)      # Manipulação de dados (parte do tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Leitura de dados a partir de um arquivo Excel\n\ndados <- read_excel(\"dados_diversos.xlsx\", sheet = \"sensibilidade_fungicidas\")\n\n# Transformando a variável 'dose' para o tipo numérico\ndados2 <- dados |> \n  mutate(dose = as.numeric(dose))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Importando dados diretamente de planilhas do Google Sheets\n\nlibrary(gsheet)  # Permite ler diretamente de links compartilhados\n\ndados_nuvem_analises <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit?usp=sharing&ouid=114387405594168347966&rtpof=true&sd=true\")\ndados_nuvem_Mg <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit?gid=983033137#gid=983033137\")\nsurvey <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit?gid=1118819738#gid=1118819738\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Manipulações com dplyr\n\n# Contagem de observações por estado\ndados_estado <- survey |>\n  group_by(state) |>\n  count()\n\n# Filtrando dados dos estados RS e PR\nRS <- survey |> filter(state == \"RS\")\nPR <- survey |> filter(state == \"PR\")\n\n# Combinando os dois conjuntos de dados\ncombinado <- rbind(RS, PR)\n\n# Selecionando colunas específicas\nsurvey_b <- survey |> \n  dplyr::select(year, state, species)\n\n# Filtrando dados do ano de 2010\nsurvey_2010 <- survey |> \n  dplyr::select(year, state, species) |> \n  filter(year == 2010)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Tabelas de contingência com janitor\n\nlibrary(janitor)\n\n# Frequência de espécies por estado e ano\nsurvey_b |> \n  tabyl(state, species, year)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$`2009`\n state Fgra Fspp\n    PR   92   31\n    RS  133    9\n\n$`2010`\n state Fgra Fspp\n    PR    0    0\n    RS  187   29\n\n$`2011`\n state Fgra Fspp\n    PR   58   35\n    RS   82   10\n```\n\n\n:::\n\n```{.r .cell-code}\n# Frequência de espécies por ano\nsurvey_b |> \n  tabyl(species, year)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n species 2009 2010 2011\n    Fgra  225  187  140\n    Fspp   40   29   45\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Gráfico de boxplot: efeito de tratamento com Mg\n\nMg <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit?gid=983033137#gid=983033137\")\n\nlibrary(ggthemes)\n\nPlot_Mg <- Mg |> \n  ggplot(aes(trat, comp)) +\n  geom_boxplot(fill = \"darkorange\", outline.color = NA) +\n  geom_jitter(width = 0.1, color = \"gray25\") +\n  scale_y_continuous(limits = c(5, 20)) +\n  labs(\n    x = \"Tratamentos\",  \n    y = \"Comprimento (mm)\", \n    title = \"Efeito do Mg\", \n    subtitle = \"Tamanho da lesão da mancha parda\",\n    caption = \"Fonte: Rodrigues et al. 2020\"\n  ) +\n  theme_clean() +\n  theme_minimal(base_size = 14)\n\n# Salvando o gráfico\nggsave(\"box.png\", bg = \"white\", width = 5, height = 5)\n```\n:::\n\n\n\n\n![](images/clipboard-3558917315.png)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Gráfico de crescimento micelial por espécie\n\nmicelial <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit?gid=959387827#gid=959387827\")\n\nplot_micelial <- micelial |>\n  ggplot(aes(reorder(especie, tcm), tcm)) +\n  geom_boxplot(fill = \"blue\", outline.color = NA) +\n  geom_jitter(width = 0.1, color = \"gray25\") +\n  coord_flip() +\n  theme(axis.title.x = element_text(face = \"italic\")) +\n  labs(x = \"Espécies\", y = \"Taxa de crescimento\")\n# Exibir\nplot_micelial\n```\n\n::: {.cell-output-display}\n![](aula2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ───────────────────────────────────────────────────────────────\n# Combinação dos dois gráficos com patchwork\n\nlibrary(patchwork)  # Facilita a junção de múltiplos gráficos no mesmo painel\n\n# Juntando os dois gráficos lado a lado, com letras A e B\n(Plot_Mg + plot_micelial) +\n  plot_annotation(tag_levels = \"A\")\n```\n\n::: {.cell-output-display}\n![](aula2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Salvando o gráfico combinado\nggsave(\"combol.png\", bg = \"white\", width = 8, height = 5)\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}